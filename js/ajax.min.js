var createAjax=function(){var c;try{c=new ActiveXobject("Microsoft.XMLHTTP")}catch(b){try{c=new XMLHttpRequest()}catch(a){window.alert("your Browser not support ajax,please change another!")}}return c};var ajax=function(conf){var type=(conf.type||"get").toUpperCase();var url=conf.url||"";var data=conf.data||{};var dataType=(conf.dataType||"json").toUpperCase();var async=conf.async||true;var contentType=conf.contentType||"application/x-www-form-urlencoded";var success=conf.success,fail=conf.fail;if(!url||url===""){alert("please set url !");return}else{if(type==="GET"&&url.indexOf("?")===-1){url=url+"?"+getParams(data)}}var xhr=createAjax();xhr.open(type,url,async);if(type==="GET"){xhr.send(null)}else{if(type==="POST"){xhr.setRequestHeader("content-type",contentType);xhr.send(JSON.stringify(data))}}xhr.onreadystatechange=function(){if(xhr.readyState===4&&xhr.status===200){if(dataType==="TEXT"&&success){success(xhr.responseText)}else{if(dataType==="XML"&&success){success(xhr.responseXML)}else{if(dataType==="JSON"&&success){success(eval("("+xhr.responseText+")"))}}}}else{if(fail){fail(xhr.status)}}}};function getParams(b){var a=[];for(var c in b){a.push(encodeURIComponent(c)+"="+encodeURIComponent(b[c]))}a.push(("randomNumber="+Math.random()).replace(".",""));return a.join("&")};